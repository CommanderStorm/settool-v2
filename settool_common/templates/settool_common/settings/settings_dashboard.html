{% extends "settool_common/settings/base_settings.html" %}
{% load i18n %}

{% block set_common_headercontent %}{% trans "Settings dashboard" %}{% endblock %}

{% block set_common_content %}
<h5 class="card-title">{% trans "Email-templates by sender" %}</h5>
<div
    class="chart-container"
    style="position: relative; height: 40vh; width: 80vw"
>
    <canvas id='email_pie_chart'></canvas>
</div>
{% endblock %}

{% block defered_script %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script>
        /* global Chart */
        const ctx = document.getElementById('email_pie_chart').getContext('2d');

        /* eslint no-new: off */
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: {{ mail_template_sender|safe }},
                datasets: [
                    {
                        label: 'Email Templates by sender',
                        data: {{ mail_template_count }},
                        backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)', 'rgb(255, 205, 86)'],
                    },
                ],
            },
            options: {
                maintainAspectRatio: false,
            },
        });
    </script>
{% endblock %}
