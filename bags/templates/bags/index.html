{% extends "settool_common/base.html" %}
{% load i18n %}
{% load bootstrap3 %}

{% block head %}
<script>
    $(function(){
        $("#bagTable").tablesorter({
            theme           : "bootstrap",
            widgets         : ['zebra', 'columns', 'uitheme'],
            headerTemplate  : '{content} {icon}',
            sortReset       : true,
            sortRestart     : true
	});
    });
</script>
{% endblock %}

{% block title %}{% trans "Freshmen bags" %} - {% trans "List companies" %}{% endblock %}

{% block content %}
    <h1>
        {% trans "List companies" %}
    </h1>


    <div class="row">
        <div class="col-xs-12 col-lg-5">
            <form method="post" action="">
                {% csrf_token %}
                {% bootstrap_form form %}
                <button type="submit" name="mailform" class="btn btn-default">{% trans "Send emails" %}</button>
            </form>
        </div>
        <div class="col-xs-12 col-lg-5">
            <form method="post" action="">
                {% csrf_token %}
                {% bootstrap_form filterform %}
                <button type="submit" name="filterform" class="btn btn-default">{% trans "Filter" %}</button>
            </form>
        </div>
    </div>

    <p></p>

    <table id="bagTable" class="table tablesorter">
    <thead>
    <tr>
        <th>{% trans "Company" %}</th>
        <th>{% trans "Contact" %}</th>
        <th>{% trans "E-Mail" %}</th>
        <th>{% trans "sent" %}</th>
        <th>{% trans "successfully sent" %}</th>
        <th>{% trans "Promise" %}</th>
        <th>{% trans "Giveaways" %}</th>
        <th>{% trans "Arrival time" %}</th>
        <th>{% trans "Comment" %}</th>
        <th>{% trans "Participated last year" %}</th>
        <th>{% trans "Arrived" %}</th>
        <th>{% trans "Contact again" %}</th>
        <th>{% trans "Edit" %}</th>
        <th>{% trans "Delete" %}</th>
    </tr>
    </thead>
    <tbody>
        {% for company in companies %}
            <tr>
                <td>
                    <a href="{% url "viewcompany" company.id %}">{{ company.name }}</a>
                </td>
                <td>{{ company.full_contact }}</td>
                <td>{{ company.email }}</td>
                {% if company.email_sent %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% else %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% endif %}
                {% if company.email_sent_success %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% else %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% endif %}
                {% if company.promise %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% elif company.promise == False %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% else %}
                    <td></td>
                {% endif %}
                <td>{{ company.giveaways }}</td>
                <td>{{ company.arrival_time }}</td>
                <td>{{ company.comment }}</td>
                {% if company.last_year %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% else %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% endif %}
                {% if company.arrived %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% else %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% endif %}
                {% if company.contact_again %}
                    <td><span style="color:green" class="glyphicon glyphicon-ok"></span><span style="visibility:hidden">ja</span></td>
                {% elif company.contact_again == False %}
                    <td><span style="color:red" class="glyphicon glyphicon-remove"></span><span style="visibility:hidden">nein</span></td>
                {% else %}
                    <td></td>
                {% endif %}
                <td>
                    <a href="{% url "editcompany" company.id %}"><span class="glyphicon glyphicon-edit"></span></a>
                </td>
                <td>
                    <a href="{% url "delcompany" company.id %}"><span class="glyphicon glyphicon-trash"></span></a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
    </table>

    <table class="table">
        <tr>
            <td><a href="{% url "addcompany" %}" class="btn btn-default">{% trans "Add Company" %}</a></td>
            <td><a href="{% url "listmails" %}" class="btn btn-default">{% trans "Edit Email Templates" %}</a></td>
        </tr>
    </table>

{% endblock %}

